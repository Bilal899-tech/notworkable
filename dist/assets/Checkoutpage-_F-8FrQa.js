import{u as b,r as x,j as e}from"./index-BD4AbgKB.js";const f=()=>{const u=b(),{product:r,quantity:h}=u.state||{},[c]=x.useState(r?[{id:r.id,name:r.name,price:typeof r.price=="string"?parseFloat(r.price.replace(/[^\d.]/g,"")):r.price,quantity:h,image:r.image,color:r.color,frameType:r.frameType}]:[]),[t,p]=x.useState({fullName:"",email:"",phone:"",address:"",notes:""}),l=s=>{const{name:a,value:o}=s.target;p(d=>({...d,[a]:o}))},y=async s=>{s.preventDefault();try{const a={...t,cartItems:c,subtotal:n,tax:i,total:m};(await(await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json()).success?alert("Thank you for your order! A confirmation has been sent to your email."):alert("There was an error processing your order. Please try again.")}catch(a){console.error("Error submitting order:",a),alert("There was an error processing your order. Please try again.")}},n=c.reduce((s,a)=>{const o=typeof a.price=="number"?a.price:0,d=typeof a.quantity=="number"?a.quantity:0;return s+o*d},0),i=n*0,m=n+i;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-2/3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Customer Information"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"fullName",name:"fullName",value:t.fullName,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"John Doe"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"john@example.com"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:["Shipping Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"address",name:"address",rows:"4",value:t.address,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"123 Main St, Apt 4B\\nNew York, NY 10001"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Notes (Optional)"}),e.jsx("textarea",{id:"notes",name:"notes",rows:"3",value:t.notes,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Special delivery instructions..."})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",children:"Complete Order"})]})]})}),e.jsx("div",{className:"lg:w-1/3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Your Order"}),e.jsx("div",{className:"space-y-4 mb-6",children:c.map(s=>e.jsxs("div",{className:"flex items-start border-b border-gray-200 pb-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded-md mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-gray-600",children:["PKR ",s.price.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",s.quantity]})]}),e.jsxs("p",{className:"font-medium text-gray-900",children:["PKR ",(s.price*s.quantity).toFixed(2)]})]},s.id))}),e.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"text-gray-900",children:["PKR ",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax (8%)"}),e.jsxs("span",{className:"text-gray-900",children:["PKR ",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg mt-2",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["PKR ",m.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Payment Method"}),e.jsx("p",{className:"text-gray-600",children:"Cash on free delevery to Home"})]}),e.jsx("div",{className:"mt-6 text-xs text-gray-500",children:e.jsx("p",{children:"By completing your purchase, you agree to our Terms of Service and Privacy Policy."})})]})})]})]})})};export{f as default};
